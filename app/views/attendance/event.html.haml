#attendance
  .row
  .row{'v-show' => '!showingSearch', transition: 'slide'}
    .col.s6
      %door-counter(inline-template)
        .card-panel.cyan.darken-2
          %label Paga en puerta
          %span.count {{ doorCounter }}
          .arrows
            %a.top{'v-on:click' => 'nonRegisteredArrival()'} +
            %a.bottom{'v-on:click' => 'nonRegisteredError()'} -

    .col
      #registrantSearch.card-panel.orange.accent-3{'v-on:click' => 'showSearch()'}
        %label Pre inscripto
        %span.count {{ registeredCounter }}

  .row{'v-show' => 'showingSearch', transition: 'fade'}
    %registrant-search(inline-template)
      .row{'v-show' => 'selected == null'}
        .col.s1
          %i#back.material-icons.left.small{'v-on:click' => 'backFromSearch()'} replay
        .col.s10
          .input-field
            %input#search{'v-model' => 'search'}
            %label{for: 'search'}
              %i.material-icons search

          %ul#results.collection{'v-show' => 'search != ""', transition: 'slide'}
            %li.collection-item{'v-for' => 'user in registrants | filterBy search in "name"', 'v-on:click' => 'select(user)'}
              {{ user.name }}

      = render partial: 'profile'

:javascript
  window.registrants = #{@registrants.to_json};
  window.eventId = #{@event.id};
  window.doorCounter = #{@event.unregistered_attendees};
  window.registeredAttendees = #{@registrants.select{|r| r.signed_in}.count};
  window.passesWithCover = #{@passes_with_cover.to_json};
